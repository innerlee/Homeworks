\section{Problem 1}~\label{sec:prob1}

\subsection{} % 1.1

\begin{equation}
\begin{split}
    P(\vx)
        &= \sum_h \frac{e^{-E(\vx,\vh)}}{Z} \\
        &= \exp\bigg(\log\sum_h\frac{e^{-E(\vx,\vh)}}{Z}\bigg) \\
        &= \exp\bigg(\log\sum_h e^{-E(\vx,\vh)} - \log Z\bigg) \\
        &= \frac{\exp\bigg(\log\sum_h e^{-E(\vx,\vh)}\bigg)}{Z} \\
        &= \frac{e^{-\cF(\vx)}}{Z}. \\
\end{split}
\end{equation}

\subsection{} % 1.2

\begin{equation}
\begin{split}
    -\frac{\partial\log p(\vx)}{\partial\theta}
        &= -\frac{\partial}{\partial\theta}\log\bigg(\frac{e^{-\cF(\vx)}}{Z}\bigg) \\
        &= -\frac{\partial(-\cF(\vx))}{\partial\theta} + \frac{\partial \log Z}{\partial\theta} \\
        &= \frac{\partial \cF(\vx)}{\partial\theta} + \frac{1}{Z}\frac{\partial}{\partial\theta} \sum_{\tilde\vx} e^{-\cF(\tilde\vx)}\\
        &= \frac{\partial \cF(\vx)}{\partial\theta} - \sum_{\tilde\vx} \frac{\partial\cF(\tilde\vx)}{\partial\theta}\frac{e^{-\cF(\tilde\vx)}}{Z}\\
        &= \frac{\partial \cF(\vx)}{\partial\theta} - \sum_{\tilde\vx} \frac{\partial\cF(\tilde\vx)}{\partial\theta}p(\tilde\vx)\\
\end{split}
\end{equation}

\subsection{} % 1.3

The samples can be generated by MCMC.
One approach in MCMC is Gibbs sampling.
First generate an initial sample $\vx_0$,
Then generate $\vh_1$ according to conditional distribution $P(\vh|\vx_0)$.
Then generate $\vx_1$ from conditional distribution $P(\vx|\vh_1)$.
So on and so on.
Then the series of samples $\vx_0, \vx_1,\dots\vx_{|\cN|}$ is the wanted stuff.

RBM does not model the interactions of variables of the same layer.
So the mathematical expression for energy is simplified,
and the conditional distributions used in Gibbs sampling have closed forms.
This helps the generation process.
